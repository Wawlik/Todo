webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"uk-container uk-margin",attrs:{id:"app"}},[e("h3",{staticClass:"uk-text-left"},[e("router-link",{staticClass:"uk-link-reset uk-grid uk-grid-collapse uk-flex-middle",attrs:{to:"/Todo"}},[e("span",{staticClass:"cursor-pointer uk-margin-small-right",attrs:{"uk-icon":"home"}}),this._v(" "),e("span",[this._v("Главная")])])],1),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App"},a,!1,function(t){n("ifHE")},null,null).exports,o=n("/ocq"),r=n("mvHQ"),u=n.n(r),c=n("Xxa5"),l=n.n(c),d=n("exGp"),k=n.n(d),h={methods:{confirmDelete:function(t,e){if(window&&window.UIkit){var n=this,s="Вы уверены, что хотите удалить заметку "+e+" ?";return window.UIkit.modal.confirm(s).then(function(){return n.deleteNote(t,"tasks")},function(){return 0})}this.notifyErr("Что-то пошло не так. Возможны вы не в сети. Попробуйте перезагрузить страницу")},deleteNote:function(t,e){var n=this;return k()(l.a.mark(function s(){var a,i,o,r;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=null,s.prev=1,(i=localStorage.getItem(e))?(a=JSON.parse(i),o=t||n.$route.params.id,a.splice(o,1),r=u()(a),localStorage.setItem(e,r)):localStorage.setItem(e,[]),n.notifyOk("Вы успешно удалили заметку"),s.abrupt("return",200);case 8:return s.prev=8,s.t0=s.catch(1),n.notifyErr("Что-то пошло не так. Попробуйте перезагрузить страницу"),s.abrupt("return",0);case 12:case"end":return s.stop()}},s,n,[[1,8]])}))()},notifyOk:function(t,e){t||(t="Операция успешно выполнена"),window&&window.UIkit&&window.UIkit.notification({message:t,status:"success",timeout:e||3e3,pos:"top-right"})},notifyWarn:function(t,e){t||(t="Что-то пошло не так"),window&&window.UIkit&&window.UIkit.notification({message:t,status:"warning",timeout:e||3e3,pos:"top-right"})},notifyErr:function(t,e){t||(t="Что-то пошло не так, попытайтесь обновить страницу"),window&&window.UIkit&&window.UIkit.notification({message:t,status:"danger",timeout:e||5e3,pos:"top-right"})}}},p={name:"mainPage",mixins:[h],data:function(){return{ctask:"",newTask:"",tasks:null,lskey:"tasks"}},methods:{getConfirm:function(t,e){var n=this;return k()(l.a.mark(function s(){return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,n.confirmDelete(t,e);case 2:s.sent&&n.getTasks();case 4:case"end":return s.stop()}},s,n)}))()},addNewTodo:function(){this.ctask?(this.newTask.todo.push({name:this.ctask,done:!1}),this.ctask=""):this.notifyWarn("Введите название")},enableTaskAdd:function(){this.newTask={name:"",todo:[]}},getTasks:function(){try{var t=localStorage.getItem(this.lskey);t&&(this.tasks=JSON.parse(t))}catch(t){console.error(t)}},addNewTaskToLS:function(){if(this.newTask.todo.length)if(this.newTask.name){var t=null;try{var e=localStorage.getItem(this.lskey);if(e){(t=JSON.parse(e)).unshift(this.newTask);var n=u()(t);localStorage.setItem(this.lskey,n)}else t=u()([this.newTask]),localStorage.setItem(this.lskey,t);this.newTask="",this.getTasks()}catch(t){console.error(t)}}else this.notifyWarn("Введите название");else this.notifyWarn("Добавьте хотя бы один пункт в список")}},mounted:function(){this.getTasks()}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.newTask?n("div",[n("h4",[t._v("Создание новой заметки")]),t._v(" "),n("div",{staticClass:"uk-margin-auto uk-card uk-card-default uk-padding uk-border-rounded uk-text-left uk-width-1-1 uk-width-4-5@s uk-width-3-5@m uk-width-1-2@xl"},[n("label",{attrs:{for:"new-task-name"}},[t._v("Название")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newTask.name,expression:"newTask.name"}],staticClass:"uk-input uk-margin-small-top",attrs:{type:"text",id:"new-task-name"},domProps:{value:t.newTask.name},on:{input:function(e){e.target.composing||t.$set(t.newTask,"name",e.target.value)}}}),t._v(" "),n("div",{staticClass:"uk-margin"},[n("div",[n("div",{staticClass:"uk-margin"},[n("span",[t._v("Добавьте пункт")]),t._v(" "),n("div",{staticClass:"uk-inline uk-width-1-1 uk-margin-small-top"},[n("a",{staticClass:"uk-form-icon uk-form-icon-flip uk-margin-medium-right",attrs:{"uk-icon":"icon: check"},on:{click:function(e){return t.addNewTodo()}}}),t._v(" "),n("a",{staticClass:"uk-form-icon uk-form-icon-flip",attrs:{"uk-icon":"icon: close"},on:{click:function(e){t.ctask=""}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.ctask,expression:"ctask"}],staticClass:"uk-input",attrs:{type:"text",id:"new-task--todo"},domProps:{value:t.ctask},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.addNewTodo(e):null},input:function(e){e.target.composing||(t.ctask=e.target.value)}}})])])]),t._v(" "),n("ul",{staticClass:"uk-list uk-list-bullet"},t._l(t.newTask.todo,function(e,s){return n("li",{key:"newTodo-"+s,staticClass:"uk-text-left uk-text-truncate"},[t._v(t._s(e.name))])}),0)])]),t._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-small uk-button-primary",on:{click:function(e){return t.addNewTaskToLS()}}},[t._v("Создать заметку")]),t._v(" "),n("button",{staticClass:"uk-button uk-button-small uk-button-default",on:{click:function(e){t.newTask=!1}}},[t._v("Отменить")])])]):t._e(),t._v(" "),t.tasks&&t.tasks.length?n("h3",[t._v("\n\t\tВаши заметки:\n\t\t"),n("span",{staticClass:"cursor-pointer",attrs:{"uk-icon":"plus-circle"},on:{click:function(e){return t.enableTaskAdd()}}})]):t._e(),t._v(" "),t.tasks&&t.tasks.length?n("div",{staticClass:"uk-grid uk-grid-small"},t._l(t.tasks,function(e,s){return n("router-link",{key:e.id,staticClass:"uk-link-reset uk-width-1-1 uk-width-1-2@s uk-width-1-3@m uk-width-1-4@xl uk-margin-small-bottom",attrs:{to:"/Todo/note/"+s}},[n("div",{staticClass:"uk-card uk-card-default uk-padding-small uk-border-rounded"},[n("div",{staticClass:"uk-grid uk-grid-collapse uk-flex-between"},[n("p",{staticClass:"uk-text-bold uk-text-left uk-text-truncate"},[t._v(t._s(e.name))]),t._v(" "),n("span",{staticClass:"cursor-pointer text-danger",attrs:{"uk-icon":"trash"},on:{click:function(n){return n.preventDefault(),t.getConfirm(s,e.name)}}})]),t._v(" "),n("ul",{staticClass:"uk-list uk-list-bullet"},[t._l(e.todo.slice(0,3),function(s,a){return n("li",{key:e.id+"-note-"+a,class:"uk-text-left uk-text-truncate "+(s.done?"task--done":"")},[t._v(t._s(s.name))])}),t._v(" "),e.todo.length>3?n("span",[t._v("...")]):t._e()],2)])])}),1):t.newTask?t._e():n("div",[n("h3",{staticClass:"cursor-pointer",on:{click:function(e){return t.enableTaskAdd()}}},[t._v("Вы со всем справились, можете перекусить")]),t._v(" "),n("svg",{staticStyle:{width:"124px",height:"124px"},attrs:{viewBox:"0 0 24 24"}},[n("path",{attrs:{fill:"#333",d:"M2,16H22V18C22,19.11 21.11,20 20,20H4C2.89,20 2,19.11 2,18V16M6,4H18C20.22,4 22,5.78 22,8V10H2V8C2,5.78 3.78,4 6,4M4,11H15L17,13L19,11H20C21.11,11 22,11.89 22,13C22,14.11 21.11,15 20,15H4C2.89,15 2,14.11 2,13C2,11.89 2.89,11 4,11Z"}})]),t._v(" "),n("h3",{staticClass:"cursor-pointer",on:{click:function(e){return t.enableTaskAdd()}}},[t._v("\n\t\t\tили\n\t\t\t"),n("span",{staticClass:"text-success"},[t._v("добавьте задачу")]),t._v(" "),n("span",{staticClass:"text-success",attrs:{"uk-icon":"plus-circle"}})])])])},staticRenderFns:[]};var f=n("VU/8")(p,m,!1,function(t){n("R3DL")},null,null).exports,v=n("pFYg"),g=n.n(v),w={name:"note",mixins:[h],data:function(){return{head:"",todos:"",lskey:"tasks",ctask:"",savedTask:null,stageChange:null,step:0}},methods:{todoMove:function(t,e){var n=this.todos[t],s=this.todos[e+t];this.todos.splice(t,1,s),this.todos.splice(e+t,1,n)},confirmCancelEditing:function(){if(window&&window.UIkit){var t=this;window.UIkit.modal.confirm("Вы уверены, что хотите отменить редактирование и перейти на главную?").then(function(){t.$router.push("/Todo/")},function(){return 0})}else this.notifyErr("Что-то пошло не так. Возможны вы не в сети. Попробуйте перезагрузить страницу")},getConfirm:function(t,e){var n=this;return k()(l.a.mark(function s(){return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,n.confirmDelete(t,e);case 2:s.sent&&n.$router.push("/Todo/");case 4:case"end":return s.stop()}},s,n)}))()},setStageChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.step;this.stageChange||(this.stageChange=[]),this.stageChange[t]=JSON.parse(u()({name:this.head,todo:this.todos})),this.step++},getStageChange:function(t){(t||0===t&&this.stageChange)&&this.stageChange[t]&&(t<this.step?(this.stageChange[this.step]=JSON.parse(u()({name:this.head,todo:this.todos})),this.head=JSON.parse(u()(this.stageChange[t].name)),this.todos=JSON.parse(u()(this.stageChange[t].todo)),this.step=t):(this.head=JSON.parse(u()(this.stageChange[t].name)),this.todos=JSON.parse(u()(this.stageChange[t].todo)),this.step=t))},unsetChanges:function(){if(window&&window.UIkit){var t=this;window.UIkit.modal.confirm("Вы уверены, что хотите отменить все изменения?").then(function(){t.setStageChange(),t.head=JSON.parse(u()(t.savedTask.name)),t.todos=JSON.parse(u()(t.savedTask.todo)),t.saveTask()},function(){})}},saveTask:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t=null,e={name:this.head,todo:this.todos};try{this.setStageChange();var n=localStorage.getItem(this.lskey);if(n){t=JSON.parse(n);var s=this.$route.params.id;t.splice(s,1,e);var a=u()(t);localStorage.setItem(this.lskey,a)}else t=u()([e]),localStorage.setItem(this.lskey,t);this.notifyOk("Изменения успешно сохранены")}catch(t){console.error(t),this.notifyErr("Что-то пошло не так. Попробуйте перезагрузить страницу")}},addNewTodo:function(){this.ctask?(this.setStageChange(),this.todos.unshift({name:this.ctask,done:!1}),this.ctask=""):this.notifyWarn("Опишите задачу")},getCtask:function(){if(this.$route&&this.$route.params&&g()("number"===+this.$route.params.id)){var t=this.$route.params.id;try{var e=localStorage.getItem(this.lskey);if(e){var n=JSON.parse(e);n[t]&&(this.savedTask=JSON.parse(u()(n[t])),this.head=n[t].name,this.todos=n[t].todo)}}catch(t){console.error(t)}}else this.head="Неверный номер заметки"}},mounted:function(){this.getCtask()}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"uk-card uk-card-default uk-padding-small uk-border-rounded uk-width-1-1 uk-width-3-5@m uk-width-1-2@l"},[n("div",{staticClass:"uk-grid uk-grid-collapse uk-flex-between uk-text-emphasis uk-margin-small"},[n("span",[t._v("Редактирование заметки:")]),t._v(" "),n("div",[n("span",{staticClass:"uk-margin-small-right todo-container--revert-icon",attrs:{"uk-tooltip":"Отменить все изменения","uk-icon":"history"},on:{click:function(e){return t.unsetChanges()}}}),t._v(" "),n("span",{staticClass:"uk-margin-small-right todo-container--revert-icon",attrs:{"uk-tooltip":"Отменить последнее изменение","uk-icon":"reply"},on:{click:function(e){return t.getStageChange(t.step-1)}}}),t._v(" "),n("span",{staticClass:"uk-margin-small-right todo-container--revert-icon",attrs:{"uk-tooltip":"Повторить отмененное изменение","uk-icon":"forward"},on:{click:function(e){return t.getStageChange(t.step+1)}}}),t._v(" "),n("span",{staticClass:"uk-margin-small-right todo-container--delete-icon",attrs:{"uk-tooltip":"Удалить заметку","uk-icon":"trash"},on:{click:function(e){return t.getConfirm(null,t.head)}}})])]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.head,expression:"head"}],staticClass:"uk-input",attrs:{placeholder:"Введите название",type:"text",id:"new-task--name"},domProps:{value:t.head},on:{input:function(e){e.target.composing||(t.head=e.target.value)}}}),t._v(" "),n("div",{staticClass:"uk-inline uk-width-1-1 uk-margin-small"},[n("a",{staticClass:"uk-form-icon uk-form-icon-flip uk-margin-medium-right",attrs:{"uk-tooltip":"Добавить","uk-icon":"icon: check"},on:{click:function(e){return t.addNewTodo()}}}),t._v(" "),n("a",{staticClass:"uk-form-icon uk-form-icon-flip",attrs:{"uk-tooltip":"Очистить","uk-icon":"icon: close"},on:{click:function(e){t.ctask=""}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.ctask,expression:"ctask"}],staticClass:"uk-input",attrs:{placeholder:"Добавьте пункт",type:"text",id:"new-task--todo"},domProps:{value:t.ctask},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.addNewTodo(e):null},input:function(e){e.target.composing||(t.ctask=e.target.value)}}})]),t._v(" "),n("ul",{staticClass:"uk-list"},t._l(t.todos,function(e,s){return n("li",{key:e+"-note-"+s,staticClass:"uk-text-left uk-text-truncate uk-grid uk-grid-collapse uk-flex-middle uk-flex-between"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.done,expression:"one.done"}],staticClass:"uk-checkbox uk-width-auto todo--checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.done)?t._i(e.done,null)>-1:e.done},on:{change:function(n){var s=e.done,a=n.target,i=!!a.checked;if(Array.isArray(s)){var o=t._i(s,null);a.checked?o<0&&t.$set(e,"done",s.concat([null])):o>-1&&t.$set(e,"done",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(e,"done",i)}}}),t._v(" "),n("div",{staticClass:"uk-inline uk-width-expand"},[n("a",{staticClass:"uk-form-icon uk-form-icon-flip",attrs:{"uk-tooltip":"Очистить","uk-icon":"icon: close"},on:{click:function(e){return t.todos.splice(s,1)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"one.name"}],staticClass:"uk-input uk-width-expand",attrs:{type:"text",id:"current-task--todo"},domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})]),t._v(" "),n("div",{staticStyle:{width:"40px"}},[n("span",s?{attrs:{"uk-icon":"arrow-up","uk-tooltip":"Поднять"},on:{click:function(e){return t.todoMove(s,-1)}}}:[t._v("    ")]),t._v(" "),s<t.todos.length-1?n("span",{attrs:{"uk-icon":"arrow-down","uk-tooltip":"Опустить"},on:{click:function(e){return t.todoMove(s,1)}}}):t._e()])])}),0),t._v(" "),n("button",{staticClass:"uk-button uk-button-small uk-button-primary",on:{click:function(e){return t.saveTask()}}},[t._v("Сохранить")]),t._v(" "),n("button",{staticClass:"uk-button uk-button-small uk-button-default",on:{click:function(e){return t.confirmCancelEditing()}}},[t._v("Отменить")])])},staticRenderFns:[]};var _=n("VU/8")(w,C,!1,function(t){n("PX7J")},null,null).exports;s.a.use(o.a);var y=new o.a({routes:[{path:"/Todo/",name:"mainPage",component:f},{path:"/Todo/note/:id",name:"note",component:_}],mode:"history"});s.a.config.productionTip=!1,new s.a({el:"#app",router:y,components:{App:i},template:"<App/>"})},PX7J:function(t,e){},R3DL:function(t,e){},ifHE:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c8c9cddf971266cd6e5c.js.map